## Context

当前 HTTP 服务器默认绑定到 0.0.0.0，允许外部网络访问。这在开发和生产环境中都存在安全隐患。需要：
1. 将默认绑定地址改为 127.0.0.1（仅本地访问）
2. 提供配置机制允许用户自定义监听地址
3. 提供 UI 界面方便用户修改配置

## Goals / Non-Goals

**Goals:**
- 服务器默认仅监听 127.0.0.1，禁止外部访问
- 支持通过配置文件配置监听地址
- 提供系统配置页面 UI 供用户修改配置
- 配置变更后服务重启生效

**Non-Goals:**
- 配置热更新（无需重启服务）
- 动态防火墙规则配置
- SSL/TLS 配置（超出本变更范围）
- 多端口监听支持

## Decisions

### Decision 1: 配置存储位置
- **选择**: 使用 JSON 配置文件存储在服务配置目录
- **理由**: 简单易用，与现有配置方式保持一致
- **替代方案**: 数据库存储（过度设计）

### Decision 2: 配置生效时机
- **选择**: 服务重启后生效
- **理由**: 绑定地址变更需要重启 HTTP 服务器，实现简单可靠
- **替代方案**: 热重载（复杂度较高，收益有限）

### Decision 3: 默认地址选择
- **选择**: 127.0.0.1
- **理由**: IPv4 localhost 标准地址，兼容性最好
- **替代方案**: ::1 (IPv6) - 某些环境可能不支持 IPv6

### Decision 4: 前端配置页面位置
- **选择**: 新增【系统配置】页面，独立于现有设置
- **理由**: 这是系统级配置，与业务配置分离更清晰
- **替代方案**: 合并到现有设置页面（可能造成混淆）

## Risks / Trade-offs

| Risk | Mitigation |
|------|-----------|
| 用户升级后无法远程访问 | 在更新日志中明确说明，提供配置迁移指南 |
| 用户错误配置导致无法访问 | 配置页面提供默认值和验证，保留本地回退机制 |
| 配置格式变更 | 使用版本化的配置结构，支持向后兼容 |

## Migration Plan

1. **部署前**: 提醒用户此变更为 BREAKING CHANGE
2. **部署时**: 
   - 自动创建默认配置文件（如果不存在）
   - 默认绑定 127.0.0.1
3. **需要远程访问的用户**: 
   - 访问系统配置页面
   - 修改绑定地址为 0.0.0.0 或特定 IP
   - 重启服务

## Open Questions

- 是否需要配置备份机制？
- 是否需要配置导入/导出功能？
